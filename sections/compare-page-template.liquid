{% if section.blocks.size > 0 %}
{% for block in section.blocks %}
	{% if forloop.index == 1 %}
		{% assign handle1 =  block.settings.product %}
	{% elsif forloop.index == 2 %}
		{% assign handle2 =  block.settings.product %}
	{% elsif forloop.index ==3 %}
		{% assign handle3 =  block.settings.product %}
	{% endif %}
{% endfor %}

{% assign product1 =  all_products[handle1] %}
{% assign product2 =  all_products[handle2] %}
{% assign product3 =  all_products[handle3] %}

<div class="section-fixed sticky-header">
  <div class="container compare">
      <div class="sixteen columns page clearfix">
        {% if handle1 %}
        <div id="fmain1" class="one-third column alpha">
          {% if product1.metafields.custom_fields["product_title"] != blank %}
          	<h3 class="header-fixed">{{ product1.metafields.custom_fields["product_title"] }}</h3>
          {% else %}
          	<h3 class="header-fixed">{{ product1.title }}</h3>
          {% endif %}
          <div class="price-compare">
            From 
            <span>{{ product1.price_min | money }}</span>
            <span class="was_price">
              {% if product1.price_min < product1.compare_at_price_min %}
              <span class="money">{{ product1.compare_at_price_min | money }}</span>
              {% endif %}
            </span>
          </div>
          <a href="/products/{{ product1.handle }}" class="action_button">Shop Now</a>
        </div>
        {% endif %}
        {% if handle2 %}
        <div id="fmain2" class="one-third column">
          {% if product2.metafields.custom_fields["product_title"] != blank %}
          	<h3 class="header-fixed">{{ product2.metafields.custom_fields["product_title"] }}</h3>
          {% else %}
          	<h3 class="header-fixed">{{ product2.title }}</h3>
          {% endif %}
          <div class="price-compare">
            From 
            <span>{{ product2.price_min | money }}</span>
            <span class="was_price">
              {% if product2.price_min < product2.compare_at_price_min %}
              <span class="money">{{ product2.compare_at_price_min | money }}</span>
              {% endif %}
            </span>
          </div>

          <a href="/products/{{ product2.handle }}" class="action_button">Shop Now</a>
        </div>
        {% endif %}
        {% if handle3 %}
        <div id="fmain3" class="one-third column omega">
          {% if product3.metafields.custom_fields["product_title"] != blank %}
          	<h3 class="header-fixed">{{ product3.metafields.custom_fields["product_title"] }}</h3>
          {% else %}
          	<h3 class="header-fixed">{{ product3.title }}</h3>
          {% endif %}
          <div class="price-compare">
            From 
            <span>{{ product3.price_min | money }}</span>
            <span class="was_price">
              {% if product3.price_min < product3.compare_at_price_min %}
              <span class="money">{{ product3.compare_at_price_min | money }}</span>
              {% endif %}
            </span>
          </div>

          <a href="/products/{{ product3.handle }}" class="action_button">Shop Now</a>
        </div>
        {% endif %}
      </div>
  </div>
</div>

<div class="container compare">
  <a name="pagecontent" id="pagecontent"></a>
  <div class="sixteen columns page clearfix">
    
    <div class="page-header">
      <h1>{{section.settings.heading }}</h1>
      <p>{{section.settings.subheading }}</p>
    </div>
    
	{% if handle1 %}
    <div data-col="1" class="one-third column alpha">
      
      <select name="compare">
      {% for block in section.blocks %}
      	<option {% if handle1 == block.settings.product%}selected="selected"{% endif%} value="{{ all_products[block.settings.product].handle }}">{{ all_products[block.settings.product].title }}</option>
      {% endfor %}
      </select>
    </div>
	{% endif %}

	{% if handle2 %}
    <div data-col="2" class="one-third column">
      
      <select name="compare"> 
      {% for block in section.blocks %}
      	<option {% if handle2 == block.settings.product%} selected="selected"{% endif%} value="{{ all_products[block.settings.product].handle }}">{{ all_products[block.settings.product].title }}</option>
      {% endfor %}
      </select>
    </div>
	{% endif %}
    
  	{% if handle3 %}
    <div data-col="3" class="one-third column omega">
      
      <select name="compare"> 
      {% for block in section.blocks %}
      	<option {% if handle3 == block.settings.product%} selected="selected"{% endif%} value="{{ all_products[block.settings.product].handle }}">{{ all_products[block.settings.product].title }}</option>
      {% endfor %}
      </select>
    </div>
	{% endif %}
  </div>
</div>

<div class="container compare">
	<div class="sixteen columns page clearfix">
      {% if handle1 %}
      <div id="main1" class="one-third column alpha">
        <div class="image-wrapper">
          <img src="{{ product1.featured_image | img_url: 'master' }}" alt="{{ product1.title }}">
          {% if product1.metafields.custom_fields["featured_title"] != blank %} 
          <div class="badge-label">{{ product1.metafields.custom_fields["featured_title"] }}</div>
          {% endif %}

        </div>
        <div class="price-compare">
          From 
          <span>{{ product1.price_min | money }}</span>
          <span class="was_price">
            {% if product1.price_min < product1.compare_at_price_min %}
            <span class="money">{{ product1.compare_at_price_min | money }}</span>
            {% endif %}
          </span>
        </div>

        <a href="/products/{{ product1.handle }}" class="action_button">Shop Now</a>
      </div>
      {% endif %}
      {% if handle2 %}
      <div id="main2" class="one-third column">

        <div class="image-wrapper">
          <img src="{{ product2.featured_image | img_url: 'master' }}" alt="{{ product2.title }}">
          {% if product2.metafields.custom_fields["featured_title"] != blank %} 
          <div class="badge-label">{{ product2.metafields.custom_fields["featured_title"] }}</div>
          {% endif %}
        </div>
		
        <div class="price-compare">
          From 
          <span>{{ product2.price_min | money }}</span>
          <span class="was_price">
            {% if product2.price_min < product2.compare_at_price_min %}
            <span class="money">{{ product2.compare_at_price_min | money }}</span>
            {% endif %}
          </span>
        </div>

        <a href="/products/{{ product2.handle }}" class="action_button">Shop Now</a>
      </div>
      {% endif %}
      {% if handle3 %}
      <div id="main3" class="one-third column omega">
        <div class="image-wrapper">
          <img src="{{ product3.featured_image | img_url: 'master' }}" alt="{{ product3.title }}">
          {% if product3.metafields.custom_fields["featured_title"] != blank %} 
          <div class="badge-label">{{ product3.metafields.custom_fields["featured_title"] }}</div>
          {% endif %}
        </div>
        <div class="price-compare">
          From 
          <span>{{ product3.price_min | money }}</span>
          <span class="was_price">
            {% if product3.price_min < product3.compare_at_price_min %}
            <span class="money">{{ product3.compare_at_price_min | money }}</span>
            {% endif %}
          </span>
        </div>

        <a href="/products/{{ product3.handle }}" class="action_button">Shop Now</a>
      </div>
      {% endif %}
    </div>
</div>

{% if section.settings.section1 != '' %}
<div class="section-header">
  <div class="container">
  	<h3>{{ section.settings.section1 }}</h3>
  </div>
</div>


<div class="container compare">
  <div class="sixteen columns page clearfix">
    {% if handle1 %}
    <div id="section11" class="one-third column alpha">

      {% if product1.metafields.custom_fields["compare_section_1"] != blank %}

      {{ product1.metafields.custom_fields["compare_section_1"] }}

      {% endif %}
      
      
    </div>
    {% endif %}
    {% if handle2 %}
    <div id="section12" class="one-third column">
      {% if product2.metafields.custom_fields["compare_section_1"] != blank %}

      {{ product2.metafields.custom_fields["compare_section_1"] }}

      {% endif %}
    </div>
    {% endif %}
    {% if handle3 %}
    <div id="section13" class="one-third column omega">
      {% if product3.metafields.custom_fields["compare_section_1"] != blank %}

      {{ product3.metafields.custom_fields["compare_section_1"] }}

      {% endif %}
    </div>
    {% endif %}
  </div>
</div>
{% endif %}

{% if section.settings.section2 != '' %}
<div class="section-header">
  <div class="container compare">
  	<h3>{{ section.settings.section2 }}</h3>
  </div>
</div>

<div class="container compare">
	<div class="sixteen columns page clearfix">
      {% if handle1 %}
      <div id="section21" class="one-third column alpha">
        {% if product1.metafields.custom_fields["compare_section_2"] != blank %}

        {{ product1.metafields.custom_fields["compare_section_2"] }}

        {% endif %}
      </div>
      {% endif %}
      
      {% if handle2 %}
      <div id="section22" class="one-third column">
        {% if product2.metafields.custom_fields["compare_section_2"] != blank %}

        {{ product2.metafields.custom_fields["compare_section_2"] }}

        {% endif %}
      </div>
      {% endif %}
      {% if handle3 %}
      <div id="section23" class="one-third column omega">
        {% if product3.metafields.custom_fields["compare_section_2"] != blank %}

        {{ product3.metafields.custom_fields["compare_section_2"] }}

        {% endif %}
      </div>
      {% endif %}
    </div>
</div>
{% endif %}

{% if section.settings.section3 != '' %}
<div class="section-header">
  <div class="container compare">
  	<h3>{{ section.settings.section3 }}</h3>
  </div>
</div>

<div class="container compare">
	<div class="sixteen columns page clearfix">
      {% if handle1 %}
      <div id="section31" class="one-third column alpha">
        {% if product1.metafields.custom_fields["compare_section_3"] != blank %}

        {{ product1.metafields.custom_fields["compare_section_3"] }}

        {% endif %}
      </div>
      {% endif %}
      
      {% if handle2 %}
      <div id="section32" class="one-third column">
        {% if product2.metafields.custom_fields["compare_section_3"] != blank %}

        {{ product2.metafields.custom_fields["compare_section_3"] }}

        {% endif %}
      </div>
      {% endif %}
      {% if handle3 %}
      <div id="section33" class="one-third column omega">
        {% if product3.metafields.custom_fields["compare_section_3"] != blank %}

        {{ product3.metafields.custom_fields["compare_section_3"] }}

        {% endif %}
      </div>
      {% endif %}
    </div>
</div>
{% endif %}

{% if section.settings.section4 != '' %}
<div class="section-header">
  <div class="container compare">
  	<h3>{{ section.settings.section4 }}</h3>
  </div>
</div>

<div class="container compare">
	<div class="sixteen columns page clearfix">
      {% if handle1 %}
      <div id="section41" class="one-third column alpha">
        {% if product1.metafields.custom_fields["compare_section_4"] != blank %}

        {{ product1.metafields.custom_fields["compare_section_4"] }}

        {% endif %}
      </div>
      {% endif %}
      
      {% if handle2 %}
      <div id="section42" class="one-third column">
        {% if product2.metafields.custom_fields["compare_section_4"] != blank %}

        {{ product2.metafields.custom_fields["compare_section_4"] }}

        {% endif %}
      </div>
      {% endif %}
      {% if handle3 %}
      <div id="section43" class="one-third column omega">
        {% if product3.metafields.custom_fields["compare_section_4"] != blank %}

        {{ product3.metafields.custom_fields["compare_section_4"] }}

        {% endif %}
      </div>
      {% endif %}
    </div>
</div>
{% endif %}

{% if section.settings.section5 != '' %}
<div class="section-header">
  <div class="container compare">
    <h3>{{ section.settings.section5 }}</h3>
  </div>
</div>

<div class="container compare">
    <div class="sixteen columns page clearfix">
      {% if handle1 %}
      <div id="section51" class="one-third column alpha">
        {% if product1.metafields.custom_fields["compare_section_5"] != blank %}

        {{ product1.metafields.custom_fields["compare_section_5"] }}

        {% endif %}
      </div>
      {% endif %}
      
      {% if handle2 %}
      <div id="section52" class="one-third column">
        {% if product2.metafields.custom_fields["compare_section_5"] != blank %}

        {{ product2.metafields.custom_fields["compare_section_5"] }}

        {% endif %}
      </div>
      {% endif %}
      {% if handle3 %}
      <div id="section53" class="one-third column omega">
        {% if product3.metafields.custom_fields["compare_section_5"] != blank %}

        {{ product3.metafields.custom_fields["compare_section_5"] }}

        {% endif %}
      </div>
      {% endif %}
    </div>
</div>
{% endif %}

{% if section.settings.section6 != '' %}
<div class="section-header">
  <div class="container compare">
    <h3>{{ section.settings.section6 }}</h3>
  </div>
</div>

<div class="container compare">
    <div class="sixteen columns page clearfix">
      {% if handle1 %}
      <div id="section61" class="one-third column alpha">
        {% if product1.metafields.custom_fields["compare_section_6"] != blank %}

        {{ product1.metafields.custom_fields["compare_section_6"] }}

        {% endif %}
      </div>
      {% endif %}
      
      {% if handle2 %}
      <div id="section62" class="one-third column">
        {% if product2.metafields.custom_fields["compare_section_6"] != blank %}

        {{ product2.metafields.custom_fields["compare_section_6"] }}

        {% endif %}
      </div>
      {% endif %}
      {% if handle3 %}
      <div id="section63" class="one-third column omega">
        {% if product3.metafields.custom_fields["compare_section_6"] != blank %}

        {{ product3.metafields.custom_fields["compare_section_6"] }}

        {% endif %}
      </div>
      {% endif %}
    </div>
</div>
{% endif %}

{% if section.settings.section7 != '' %}
<div class="section-header">
  <div class="container compare">
    <h3>{{ section.settings.section7 }}</h3>
  </div>
</div>

<div class="container common">
    <div class="sixteen columns page clearfix">

      <div id="section71" class="one-fourth column alpha">
        {% if section.settings.section71 != blank %}

        {{ section.settings.section71 }}

        {% endif %}
      </div>

      
      <div id="section72" class="one-fourth column">
        {% if section.settings.section72 != blank %}

        {{ section.settings.section72 }}

        {% endif %}
      </div>
      
      <div id="section72" class="one-fourth column">
        {% if section.settings.section73 != blank %}

        {{ section.settings.section73 }}

        {% endif %}
      </div>
      
      
      <div id="section73" class="one-fourth column omega">
        {% if section.settings.section74 != blank %}

        {{ section.settings.section74 }}

        {% endif %}
      </div>
      
    </div>
</div>
{% endif %}

{% if section.settings.section8 != '' %}
<div class="section-header">
  <div class="container compare">
    <h3>{{ section.settings.section8 }}</h3>
  </div>
</div>

<div class="container compare">
    <div class="sixteen columns page clearfix">
      {% if handle1 %}
      <div id="section81" class="one-third column alpha">
        {% if product1.metafields.custom_fields["compare_section_8"] != blank %}

        {{ product1.metafields.custom_fields["compare_section_8"] }}

        {% endif %}
      </div>
      {% endif %}
      
      {% if handle2 %}
      <div id="section82" class="one-third column">
        {% if product2.metafields.custom_fields["compare_section_8"] != blank %}

        {{ product2.metafields.custom_fields["compare_section_8"] }}

        {% endif %}
      </div>
      {% endif %}
      {% if handle3 %}
      <div id="section83" class="one-third column omega">
        {% if product3.metafields.custom_fields["compare_section_8"] != blank %}

        {{ product3.metafields.custom_fields["compare_section_8"] }}

        {% endif %}
      </div>
      {% endif %}
    </div>
</div>
{% endif %}

{% if section.settings.section9 != '' %}
<div class="section-header">
  <div class="container compare">
    <h3>{{ section.settings.section9 }}</h3>
  </div>
</div>

<div class="container compare">
    <div class="sixteen columns page clearfix">
      {% if handle1 %}
      <div id="section91" class="one-third column alpha">
        {% if product1.metafields.custom_fields["compare_section_9"] != blank %}

        {{ product1.metafields.custom_fields["compare_section_9"] }}

        {% endif %}
      </div>
      {% endif %}
      
      {% if handle2 %}
      <div id="section92" class="one-third column">
        {% if product2.metafields.custom_fields["compare_section_9"] != blank %}

        {{ product2.metafields.custom_fields["compare_section_9"] }}

        {% endif %}
      </div>
      {% endif %}
      {% if handle3 %}
      <div id="section93" class="one-third column omega">
        {% if product3.metafields.custom_fields["compare_section_9"] != blank %}

        {{ product3.metafields.custom_fields["compare_section_9"] }}

        {% endif %}
      </div>
      {% endif %}
    </div>
</div>
{% endif %}

{% if section.settings.section10 != '' %}
<div class="section-header">
  <div class="container compare">
    <h3>{{ section.settings.section10 }}</h3>
  </div>
</div>

<div class="container compare">
    <div class="sixteen columns page clearfix">
      {% if handle1 %}
      <div id="section101" class="one-third column alpha">
        {% if product1.metafields.custom_fields["compare_section_10"] != blank %}

        {{ product1.metafields.custom_fields["compare_section_10"] }}

        {% endif %}
      </div>
      {% endif %}
      
      {% if handle2 %}
      <div id="section102" class="one-third column">
        {% if product2.metafields.custom_fields["compare_section_10"] != blank %}

        {{ product2.metafields.custom_fields["compare_section_10"] }}

        {% endif %}
      </div>
      {% endif %}
      {% if handle3 %}
      <div id="section103" class="one-third column omega">
        {% if product3.metafields.custom_fields["compare_section_10"] != blank %}

        {{ product3.metafields.custom_fields["compare_section_10"] }}

        {% endif %}
      </div>
      {% endif %}
    </div>
</div>
{% endif %}



<style>
.section-header {
    background: rgb(245,246,247);
}

.section-header h3 {
    margin: 0;
    padding-left: 45px;
    padding-right: 45px;
    margin-left: 0;
    margin-right: 0;
}

.container.compare .columns .column {
    border-left: 1px solid #dbdbdc;
    border-right: 1px solid #dbdbdc;
    padding-left: 40px;
    padding-right: 40px;
    margin-left: 0;
    margin-right: 0;
}

.container.compare .columns .column.alpha, .container.compare .columns .column.omega {
    border: none;
}

.container.compare .columns .column.one-third {
    width: 33.33333%;
}
.container.compare .columns .column {
    min-height: 1px;
}
.price-compare {
    margin: 15px 0;
    font-size: 18px;
}
.compare .action_button {
    background: #343e64;
    border: none;
    display: flex;
    width: 100%;
    justify-content: center;
    align-items: center;
    text-transform: uppercase;
    text-align: center;
    font-weight: 600;
    font-size: 15px;
    margin-bottom: 30px;
}
.price-compare span {
    font-weight: 600;
    font-size: 22px;
}

#shopify-section-header {
    border-bottom: 1px solid #f3f3f4;
}

.page-header {
    text-align: center;
    margin-top: 70px;
    margin-bottom: 60px;
}

.page-header h1 {
    color: rgb(53,62,101);
    font-size: 35px;
    margin-bottom: 10px;
}

.image-wrapper {
    position: relative;
}

.badge-label {
    position: absolute;
    top: -15px;
    background: #363f68;
    color: #fff;
    padding: 3px 12px;
    border-radius: 5px;
    font-size: 12px;
    left: 15px;
}
h3.header-fixed {
    color: #343f63;
    line-height: 1.3;
    font-size: 18px;
    margin-bottom: 0px;
  	display: none;
  	min-height: 46px;
}

.compare.fixed h3.header-fixed {
    display: block;
}

.compare.fixed {
    position: fixed;
    top: 50px;
    left: 0;
    right: 0;
    z-index: 100;
    background: #fff;
}

.compare.fixed .price-compare {
    margin: 10px 0px;
}

.compare.fixed .image-wrapper {
    display: none;
}

.compare.fixed .column {
    background: #fff;
}

.sticky_nav--stick {
    border-bottom: 1px solid #f3f3f4;
}

.section-fixed.sticky-header.fixed .action_button {
    margin-bottom: 5px;
}

.container.common {
    padding-top: 35px;
    padding-bottom: 40px;
}

.container.common .column {
    padding-left: 25px;
    padding-right: 25px;
    text-align: center;
    font-weight: 600;
    font-size: 16px;
}
.section-fixed {
    background: #fff;
}

.section-fixed.sticky-header {
    position: fixed;
    left: 0;
    width: 100%;
  	top: 50px;
    right: 0;
    z-index: 100;
    display: none;
}

.section-fixed.sticky-header .container {
    padding-bottom: 0;
}

.section-fixed.sticky-header h3.header-fixed {
    display: block;
}

.section-fixed.sticky-header .price-compare {
    margin-top: 5px;
}

.section-fixed.sticky-header.fixed {
    display: block;
}
  
@media only screen and (max-width: 798px) {

.container.compare .columns .column.one-third:last-child {
    display: none !important;
}

.container.compare .columns .column {
    border-right: none;
}

.container.compare .columns .column.one-third {
    width: 50%;
    padding: 0 13px;
}

.container.compare {
    width: 100%;
}

.price-compare {
    font-size: 15px;
}

.price-compare span {
    font-size: 17px;
}

.compare .action_button {
    font-size: 12px;
}
.page-header {
    margin-top: 50px;
    margin-bottom: 40px;
}

.page-header h1 {
    font-size: 28px;
    line-height: 1.3;
}
.compare.fixed {
    top: 40px;
}
.container.common .column.one-fourth {
    width: calc(50% - 20px);
    margin-bottom: 20px;
}
}

</style>

{% endif %}

{% schema %}
  {
    "name": "Compare Page",
    "settings": [
      {
        "type": "header",
        "content": "Header"
      },
	  {
        "type": "text",
        "id": "heading",
        "label": "Page Heading"
      },
	  {
        "type": "text",
        "id": "subheading",
        "label": "Sub Heading"
      },
	  {
        "type": "text",
        "id": "section1",
        "label": "Section 1"
      },
	  {
        "type": "text",
        "id": "section2",
        "label": "Section 2"
      },
	  {
        "type": "text",
        "id": "section3",
        "label": "Section 3"
      },
	  {
        "type": "text",
        "id": "section4",
        "label": "Section 4"
      },
	  {
        "type": "text",
        "id": "section5",
        "label": "Section 5"
      },
	  {
        "type": "text",
        "id": "section6",
        "label": "Section 6"
      },
	  {
        "type": "header",
        "content": "Fixed Section"
      },
	  {
        "type": "text",
        "id": "section7",
        "label": "Section 7"
      },
	  {
        "type": "textarea",
        "id": "section71",
        "label": "Section 71"
      },
	  {
        "type": "textarea",
        "id": "section72",
        "label": "Section 72"
      },
	  {
        "type": "textarea",
        "id": "section73",
        "label": "Section 73"
      },
	  {
        "type": "textarea",
        "id": "section74",
        "label": "Section 74"
      },
	  {
        "type": "text",
        "id": "section8",
        "label": "Section 8"
      },
	  {
        "type": "text",
        "id": "section9",
        "label": "Section 9"
      },
	  {
        "type": "text",
        "id": "section10",
        "label": "Section 10"
      }
	],
	"blocks": [
      {
        "type": "product",
        "name": "Product",
        "settings": [
          {
            "type": "product",
            "id": "product",
            "label": "Product"
          }
        ]
      }
	],
    "default": {
      "blocks": [
        {
          "type": "product"
        },
        {
          "type": "product"
        },
        {
          "type": "product"
        }
      ]
    }
  }
{% endschema %}
